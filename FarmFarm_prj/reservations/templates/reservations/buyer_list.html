<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>구매자 예약 목록</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    h1 { font-size: 1.5rem; }
    .reservation { border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; border-radius: 8px; }
    .badge { padding: 3px 8px; border-radius: 6px; font-size: 0.8rem; background-color: #eee; }
    .items { margin-top: 8px; font-size: 0.9rem; }
  </style>
</head>
<body>
  <h1>구매자 예약 목록</h1>
  <div id="reservation-list"></div>

  <script>
    // 테스트용 구매자 ID
    const buyerId = 1;
    // API 엔드포인트
    const apiUrl = `/reservations/buyer/${buyerId}/`;

    // 데모용 더미 데이터
    const dummyData = [
      {
        id: 1,
        store_name: "덕성 빵집",
        status_label: "승인 대기",
        badge_text: "승인 대기",
        requested_pickup_at: "2025-08-11T15:30:00",
        total_price: 8000,
        items: [
          { item_name: "식빵", quantity: 2, unit_price: 3000 },
          { item_name: "크로와상", quantity: 2, unit_price: 1000 }
        ]
      }
    ];

    function renderReservations(data) {
      const container = document.getElementById("reservation-list");
      container.innerHTML = "";
      data.forEach(r => {
        const div = document.createElement("div");
        div.className = "reservation";
        div.innerHTML = `
          <strong>${r.store_name}</strong> 
          <span class="badge">${r.badge_text}</span><br/>
          픽업 요청 시간: ${r.requested_pickup_at}<br/>
          총 금액: ${r.total_price}원
          <div class="items">
            ${r.items.map(it => `${it.item_name} (${it.quantity}개)`).join(", ")}
          </div>
        `;
        container.appendChild(div);
      });
    }

    // API 연동 시: fetch(apiUrl).then(res => res.json()).then(renderReservations);
    renderReservations(dummyData);
  </script>
</body>
</html>
